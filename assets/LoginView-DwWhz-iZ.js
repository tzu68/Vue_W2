import{r as l,b as x,d as g,c as i,a as t,w as h,v,e as u,t as k,f as y,g as w,o as r,h as b}from"./index-BH4JOndM.js";import{a as _}from"./axios-DTyqpfTh.js";const $={class:"container-fluid"},j={key:0,class:"row"},T={class:"col-12 d-flex align-items-strech justify-content-center w-100"},V={class:"card text-dark bg-light mb-3 w-25"},L=t("div",{class:"card-header"},"登入",-1),C={class:"card-body d-flex align-item-strech justify-content-center flex-column"},N=t("h5",{class:"card-title d-flex align-item-strech justify-content-center flex-column"}," 請填入帳號密碼 ",-1),A={class:"card-text d-flex align-item-strech justify-content-start flex-column",style:{gap:"1vh"}},B={key:1,class:"row"},z={class:"col-12 d-flex align-items-strech justify-content-center w-100"},D={class:"card text-dark bg-light mb-3 w-75"},M=t("div",{class:"card-header"},"驗證Token",-1),R={class:"card-body d-flex align-items-center justify-content-center flex-column"},U=t("h5",{class:"card-title"},"已登入",-1),E={class:"card-text w-75"},I={class:"btn btn-dark w-25"},O={class:"row"},S={class:"col-12 d-flex align-items-strech justify-content-center w-100"},q={class:"w-75 text-center"},J={__name:"LoginView",setup(F){const c=l(!1),s=l(""),d=l("https://todolist-api.hexschool.io"),n=l({email:"floya9733@gmail.com",password:"Abc123456"});async function m(){const o=`${d.value}/users/sign_in`;try{const e=await _.post(o,n.value);console.log(e),s.value=e.data.token,document.cookie=`hexToken=${s.value}`,alert("登入成功")}catch(e){alert(e)}}async function f(){const o=`${d.value}/users/sign_out`;try{const e=await _.post(o,{},{headers:{Authorization:s.value}});alert("登出成功")}catch(e){alert(e)}}return x(async()=>{s.value=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");const o=`${d.value}/users/checkout`;(await _.get(o,{headers:{Authorization:s.value}})).status==200&&(c.value=!0)}),(o,e)=>{const p=g("RouterLink");return r(),i("div",$,[c.value?u("",!0):(r(),i("div",j,[t("div",T,[t("div",V,[L,t("div",C,[N,t("p",A,[h(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.value.email=a)},null,512),[[v,n.value.email]]),h(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.value.password=a)},null,512),[[v,n.value.password]])]),t("button",{class:"btn btn-dark",type:"button",onClick:e[2]||(e[2]=a=>m())},"登入")])])])])),c.value?(r(),i("div",B,[t("div",z,[t("div",D,[M,t("div",R,[U,t("p",E,k(s.value),1),t("button",I,[y(p,{class:"nav-link",to:"/TodoList"},{default:w(()=>[b("前往TodoList")]),_:1})])])])])])):u("",!0),t("div",O,[t("div",S,[t("div",q,[c.value?(r(),i("button",{key:0,class:"btn btn-dark w-25",onClick:e[3]||(e[3]=a=>f())},"登出")):u("",!0)])])])])}}};export{J as default};
